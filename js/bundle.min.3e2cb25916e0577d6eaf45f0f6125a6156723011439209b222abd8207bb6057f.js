var main={bigImgEl:null,numImgs:null,init:function(){$(window).scroll(function(){if($(".navbar").offset().top>50){$(".navbar").addClass("top-nav-short");}else{$(".navbar").removeClass("top-nav-short");}});$('#main-navbar').on('show.bs.collapse',function(){$(".navbar").addClass("top-nav-expanded");});$('#main-navbar').on('hidden.bs.collapse',function(){$(".navbar").removeClass("top-nav-expanded");});$('#main-navbar').on("click",".navlinks-parent",function(e){var target=e.target;$.each($(".navlinks-parent"),function(key,value){if(value==target){$(value).parent().toggleClass("show-children");}else{$(value).parent().removeClass("show-children");}});});var menus=$(".navlinks-container");if(menus.length>0){var navbar=$("#main-navbar").find("ul");var fakeMenuHtml="<li class='fake-menu' style='display:none;'><a></a></li>";navbar.append(fakeMenuHtml);var fakeMenu=$(".fake-menu");$.each(menus,function(i){var parent=$(menus[i]).find(".navlinks-parent");var children=$(menus[i]).find(".navlinks-children a");var words=[];$.each(children,function(idx,el){words=words.concat($(el).text().trim().split(/\s+/));});var maxwidth=0;$.each(words,function(id,word){fakeMenu.html("<a>"+word+"</a>");var width=fakeMenu.width();if(width>maxwidth){maxwidth=width;}});$(menus[i]).css('min-width',maxwidth+'px')});fakeMenu.remove();}
main.initImgs();(function(){'use strict';if(!document.queryCommandSupported('copy')){return;}
function flashCopyMessage(el,msg){el.textContent=msg;setTimeout(function(){el.textContent="Copy";},1000);}
function selectText(node){var selection=window.getSelection();var range=document.createRange();range.selectNodeContents(node);selection.removeAllRanges();selection.addRange(range);return selection;}
function addCopyButton(containerEl){var copyBtn=document.createElement("button");copyBtn.className="highlight-copy-btn";copyBtn.textContent=window.copyText;var codeEl=containerEl.firstElementChild;copyBtn.addEventListener('click',function(){try{var selection=selectText(codeEl);document.execCommand('copy');selection.removeAllRanges();flashCopyMessage(copyBtn,window.copiedText)}catch(e){console&&console.log(e);flashCopyMessage(copyBtn,'Failed :\'(')}});containerEl.appendChild(copyBtn);}
var highlightBlocks=document.getElementsByClassName('highlight');Array.prototype.forEach.call(highlightBlocks,addCopyButton);})();},initImgs:function(){if($("#header-big-imgs").length>0){main.bigImgEl=$("#header-big-imgs");main.numImgs=main.bigImgEl.attr("data-num-img");var imgInfo=main.getImgInfo();var src=imgInfo.src;var desc=imgInfo.desc;main.setImg(src,desc);var getNextImg=function(){var imgInfo=main.getImgInfo();var src=imgInfo.src;var desc=imgInfo.desc;var prefetchImg=new Image();prefetchImg.src=src;setTimeout(function(){var img=$("<div></div>").addClass("big-img-transition").css("background-image",'url('+src+')');$(".intro-header.big-img").prepend(img);setTimeout(function(){img.css("opacity","1");},50);setTimeout(function(){main.setImg(src,desc);img.remove();getNextImg();},1000);},6000);};if(main.numImgs>1){getNextImg();}}},getImgInfo:function(){var randNum=Math.floor((Math.random()*main.numImgs)+1);var src=main.bigImgEl.attr("data-img-src-"+randNum);var desc=main.bigImgEl.attr("data-img-desc-"+randNum);return{src:src,desc:desc}},setImg:function(src,desc){$(".intro-header.big-img").css("background-image",'url('+src+')');if(typeof desc!==typeof undefined&&desc!==false){$(".img-desc").text(desc).show();}else{$(".img-desc").hide();}}};document.addEventListener('DOMContentLoaded',main.init);;function ZanShang(){this.popbg=$('.zs-modal-bg');this.popcon=$('.zs-modal-box');this.closeBtn=$('.zs-modal-box .close');this.zsbtn=$('.zs-modal-btns .btn');this.zsPay=$('.zs-modal-pay');this.zsBtns=$('.zs-modal-btns');this.zsFooter=$('.zs-modal-footer');var that=this;$('.show-zs').on('click',function(){that._show();that._init();})}
ZanShang.prototype._hide=function(){this.popbg.hide();this.popcon.hide();}
ZanShang.prototype._show=function(){this.popbg.show();this.popcon.show();this.zsBtns.show();this.zsFooter.show();this.zsPay.hide();}
ZanShang.prototype._init=function(){var that=this;this.closeBtn.on('click',function(){that._hide();})
this.popbg.on('click',function(){that._hide();})
this.zsbtn.each(function(el){$(this).on('click',function(){var num=$(this).attr('data-num');var type=$('.zs-type:radio:checked').val();var src='/img/'+type+'-'+num+'.png';var text=$(this).html();var payType=$('#pay-type'),payImage=$('#pay-image'),payText=$('#pay-text');if(type=='alipay'){payType.html('支付宝');}else{payType.html('微信');}
payImage.attr('src',src);payText.html(text);that.zsPay.show();that.zsBtns.hide();that.zsFooter.hide();})})}
var zs=new ZanShang();